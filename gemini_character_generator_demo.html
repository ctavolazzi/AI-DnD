<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚀 Gemini-Enhanced D&D Character Generator - Live Demo</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ctext y='50'%20font-size='48'%3E🤖%3C/text%3E%3C/svg%3E">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Press Start 2P', monospace;
            background: linear-gradient(135deg, #1a1410 0%, #2a1810 50%, #1a1410 100%);
            color: #e8d4b8;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(45deg, #4a3426, #8b4513);
            border: 3px solid #b8860b;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        .header h1 {
            color: #ffd700;
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .header p {
            color: #ffb347;
            font-size: 0.8rem;
            margin-bottom: 5px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .panel {
            background: linear-gradient(180deg, #2a1810 0%, #1a1410 100%);
            border: 3px solid #b8860b;
            border-radius: 10px;
            padding: 20px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .panel-title {
            color: #ffd700;
            font-size: 1.2rem;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .character-form {
            display: grid;
            gap: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .form-group label {
            color: #ffb347;
            font-size: 0.7rem;
        }

        .form-group input,
        .form-group select {
            background: rgba(0,0,0,0.3);
            border: 2px solid #4a3426;
            border-radius: 5px;
            color: #e8d4b8;
            padding: 10px;
            font-family: 'Press Start 2P', monospace;
            font-size: 0.6rem;
        }

        .form-group input:focus,
        .form-group select:focus {
            border-color: #b8860b;
            outline: none;
        }

        .button {
            background: linear-gradient(45deg, #8b4513, #b8860b);
            border: 2px solid #ffd700;
            border-radius: 5px;
            color: #ffd700;
            padding: 15px 20px;
            font-family: 'Press Start 2P', monospace;
            font-size: 0.7rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }

        .button:hover {
            background: linear-gradient(45deg, #b8860b, #ffd700);
            color: #1a1410;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .button:disabled {
            background: #4a3426;
            color: #666;
            cursor: not-allowed;
            transform: none;
        }

        .output-section {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0,0,0,0.2);
            border: 1px solid #4a3426;
            border-radius: 8px;
        }

        .output-title {
            color: #ffb347;
            font-size: 0.8rem;
            margin-bottom: 10px;
        }

        .output-content {
            color: #e8d4b8;
            font-size: 0.6rem;
            line-height: 1.4;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
        }

        .loading {
            display: none;
            text-align: center;
            color: #ffb347;
            font-size: 0.7rem;
            margin: 20px 0;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #4a3426;
            border-radius: 50%;
            border-top-color: #ffd700;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .quest-item {
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border: 1px solid #4a3426;
            border-radius: 5px;
        }

        .quest-title {
            color: #ffd700;
            font-size: 0.7rem;
            margin-bottom: 5px;
        }

        .quest-details {
            color: #e8d4b8;
            font-size: 0.5rem;
            line-height: 1.3;
        }

        .stats-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0,0,0,0.3);
            padding: 10px 20px;
            border-radius: 5px;
            margin-bottom: 20px;
            font-size: 0.6rem;
        }

        .stats-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .success {
            color: #51cf66;
        }

        .error {
            color: #ff6b6b;
        }

        .info {
            color: #74c0fc;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 Gemini-Enhanced D&D Character Generator</h1>
            <p>AI-Powered Character Creation with Google Gemini API</p>
            <p>Live Demonstration - Powered by Gemini 2.5 Flash</p>
        </div>

        <div class="stats-bar">
            <div class="stats-item">
                <span>🤖</span>
                <span>AI Status: <span class="success">Ready</span></span>
            </div>
            <div class="stats-item">
                <span>⚡</span>
                <span>Mode: <span class="info">Simulation</span></span>
            </div>
            <div class="stats-item">
                <span>🎲</span>
                <span>Characters Generated: <span id="charCount">0</span></span>
            </div>
        </div>

        <div class="main-content">
            <!-- Character Generation Panel -->
            <div class="panel">
                <h2 class="panel-title">🎭 Character Generator</h2>

                <form class="character-form" id="characterForm">
                    <div class="form-group">
                        <label for="characterName">Character Name:</label>
                        <input type="text" id="characterName" placeholder="Enter character name" value="Aria Shadowbane">
                    </div>

                    <div class="form-group">
                        <label for="characterClass">Class:</label>
                        <select id="characterClass">
                            <option value="Rogue">Rogue</option>
                            <option value="Fighter">Fighter</option>
                            <option value="Wizard">Wizard</option>
                            <option value="Cleric">Cleric</option>
                            <option value="Bard">Bard</option>
                            <option value="Paladin">Paladin</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="characterRace">Race:</label>
                        <select id="characterRace">
                            <option value="Elf">Elf</option>
                            <option value="Human">Human</option>
                            <option value="Dwarf">Dwarf</option>
                            <option value="Halfling">Halfling</option>
                            <option value="Dragonborn">Dragonborn</option>
                            <option value="Tiefling">Tiefling</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="characterLevel">Level:</label>
                        <input type="number" id="characterLevel" min="1" max="20" value="5">
                    </div>

                    <div class="form-group">
                        <label for="characterBackground">Background:</label>
                        <select id="characterBackground">
                            <option value="Criminal">Criminal</option>
                            <option value="Noble">Noble</option>
                            <option value="Soldier">Soldier</option>
                            <option value="Sage">Sage</option>
                            <option value="Acolyte">Acolyte</option>
                            <option value="Entertainer">Entertainer</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="characterTone">Character Tone:</label>
                        <select id="characterTone">
                            <option value="dark">Dark</option>
                            <option value="serious">Serious</option>
                            <option value="comedy">Comedy</option>
                            <option value="epic">Epic</option>
                            <option value="mystery">Mystery</option>
                        </select>
                    </div>

                    <button type="button" class="button" id="generateCharacter">
                        🤖 Generate AI-Enhanced Character
                    </button>

                    <button type="button" class="button" id="generateQuests">
                        🎲 Generate Personalized Quests
                    </button>

                    <button type="button" class="button" id="generateStory">
                        📚 Generate Character Story
                    </button>
                </form>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <span>Generating AI content...</span>
                </div>
            </div>

            <!-- Output Panel -->
            <div class="panel">
                <h2 class="panel-title">✨ AI-Generated Content</h2>

                <div class="output-section">
                    <div class="output-title">📖 Character Backstory:</div>
                    <div class="output-content" id="backstoryOutput">Click "Generate AI-Enhanced Character" to see the AI-generated backstory...</div>
                </div>

                <div class="output-section">
                    <div class="output-title">🧠 Personality Insights:</div>
                    <div class="output-content" id="personalityOutput">AI personality analysis will appear here...</div>
                </div>

                <div class="output-section">
                    <div class="output-title">🗣️ Character Voice:</div>
                    <div class="output-content" id="voiceOutput">Character speech patterns and dialogue examples...</div>
                </div>

                <div class="output-section">
                    <div class="output-title">🎯 Character Goals:</div>
                    <div class="output-content" id="goalsOutput">Character motivations and aspirations...</div>
                </div>

                <div class="output-section">
                    <div class="output-title">⚠️ Character Flaws:</div>
                    <div class="output-content" id="flawsOutput">Character weaknesses and challenges...</div>
                </div>

                <div class="output-section">
                    <div class="output-title">🔗 Quest Hooks:</div>
                    <div class="output-content" id="questHooksOutput">Adventure opportunities...</div>
                </div>

                <div class="output-section">
                    <div class="output-title">📜 Generated Quests:</div>
                    <div class="output-content" id="questsOutput">Personalized quests will appear here...</div>
                </div>

                <div class="output-section">
                    <div class="output-title">📖 Character Story:</div>
                    <div class="output-content" id="storyOutput">Character narrative will appear here...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mock Gemini client for demonstration
        class MockGeminiClient {
            async generateContent(request) {
                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 1000));

                const prompt = request.contents[0].parts[0].text;

                if (prompt.includes('AI enhancement')) {
                    return this.generateCharacterEnhancement();
                } else if (prompt.includes('quests')) {
                    return this.generateQuests();
                } else if (prompt.includes('story')) {
                    return this.generateStory();
                }

                return { text: 'Mock Gemini response' };
            }

            generateCharacterEnhancement() {
                return {
                    text: JSON.stringify({
                        aiBackstory: "Born in the shadowed alleys of Waterdeep, this character's early years were marked by hardship and survival. Their family was torn apart by political intrigue, leaving them to fend for themselves on the dangerous streets. Through cunning and determination, they learned to navigate the complex web of city politics, developing skills that would serve them well in their future adventures. Their experiences have made them both fiercely independent and deeply loyal to those who earn their trust.",
                        aiPersonalityInsights: "Their high Dexterity and Intelligence scores suggest a character who thinks quickly on their feet and adapts to changing situations with remarkable ease. They possess a natural charisma that allows them to read people and situations, making them excellent at negotiation and deception when necessary.",
                        aiCharacterVoice: "Speaks with a measured, thoughtful tone, often pausing to consider their words carefully. When excited or passionate, their speech becomes more animated and expressive. Uses metaphors drawn from their urban background, often referencing 'the game' or 'playing the hand you're dealt.'",
                        aiQuestHooks: [
                            "Seeking revenge against the noble family that destroyed their family",
                            "Protecting a found family of street urchins who remind them of their past",
                            "Uncovering a conspiracy that threatens the city's political stability"
                        ],
                        aiCharacterGoals: [
                            "Establish a safe haven for the city's orphaned children",
                            "Master their abilities to become a legendary figure",
                            "Find closure regarding their family's fate"
                        ],
                        aiCharacterFlaws: [
                            "Trusts too easily once someone shows them kindness",
                            "Fear of abandonment drives them to push people away",
                            "Stubborn refusal to ask for help when needed"
                        ]
                    })
                };
            }

            generateQuests() {
                return {
                    text: JSON.stringify([
                        {
                            title: "Shadows of the Past",
                            description: "A mysterious figure from the character's past has resurfaced, bringing both danger and opportunity for closure.",
                            objectives: ["Investigate the stranger's motives", "Protect innocent bystanders", "Confront the past"],
                            rewards: ["Valuable information", "Magical item", "Political favor"],
                            difficulty: "Medium"
                        },
                        {
                            title: "The Orphan's Shield",
                            description: "Street children are disappearing from the city's poorest districts, and the character must uncover the truth.",
                            objectives: ["Find the missing children", "Identify the perpetrators", "Bring them to justice"],
                            rewards: ["Community respect", "New allies", "Hidden safe house"],
                            difficulty: "Hard"
                        },
                        {
                            title: "The Noble's Gambit",
                            description: "A high-stakes political game threatens to destabilize the city, and the character is uniquely positioned to intervene.",
                            objectives: ["Navigate political intrigue", "Gather intelligence", "Prevent disaster"],
                            rewards: ["Political influence", "Wealth", "Powerful connections"],
                            difficulty: "Hard"
                        }
                    ])
                };
            }

            generateStory() {
                return {
                    text: "The cobblestones of Waterdeep's Dock Ward were slick with rain as the character slipped through the shadows, their keen senses picking up the distant sound of the city watch's boots on wet stone. They had learned long ago that survival in this city required more than just skill—it demanded the ability to read people, to understand their motivations, and to know when to strike and when to fade into the darkness.\n\nTonight, however, was different. The information they had gathered had led them to this abandoned warehouse, and they could hear the faint sounds of crying from within. Their heart clenched as memories of their own difficult past flooded back—the nights spent in uncertainty, the constant fear, the desperate hope that someone, anyone, would care enough to help.\n\nBut they were no longer that helpless individual. They had grown stronger, wiser, and more determined. Drawing their weapons, they prepared to enter the warehouse, knowing that whatever awaited them inside would test not just their skills, but their very soul."
                };
            }
        }

        // Initialize the demonstration
        const mockClient = new MockGeminiClient();
        let characterCount = 0;

        // DOM elements
        const form = document.getElementById('characterForm');
        const loading = document.getElementById('loading');
        const generateCharacterBtn = document.getElementById('generateCharacter');
        const generateQuestsBtn = document.getElementById('generateQuests');
        const generateStoryBtn = document.getElementById('generateStory');
        const charCount = document.getElementById('charCount');

        // Output elements
        const backstoryOutput = document.getElementById('backstoryOutput');
        const personalityOutput = document.getElementById('personalityOutput');
        const voiceOutput = document.getElementById('voiceOutput');
        const goalsOutput = document.getElementById('goalsOutput');
        const flawsOutput = document.getElementById('flawsOutput');
        const questHooksOutput = document.getElementById('questHooksOutput');
        const questsOutput = document.getElementById('questsOutput');
        const storyOutput = document.getElementById('storyOutput');

        // Show loading state
        function showLoading() {
            loading.classList.add('show');
            generateCharacterBtn.disabled = true;
            generateQuestsBtn.disabled = true;
            generateStoryBtn.disabled = true;
        }

        // Hide loading state
        function hideLoading() {
            loading.classList.remove('show');
            generateCharacterBtn.disabled = false;
            generateQuestsBtn.disabled = false;
            generateStoryBtn.disabled = false;
        }

        // Generate AI-enhanced character
        async function generateCharacter() {
            showLoading();

            try {
                const characterData = {
                    name: document.getElementById('characterName').value,
                    charClass: document.getElementById('characterClass').value,
                    race: document.getElementById('characterRace').value,
                    level: parseInt(document.getElementById('characterLevel').value),
                    background: document.getElementById('characterBackground').value,
                    tone: document.getElementById('characterTone').value
                };

                const prompt = `Generate AI enhancement for D&D character: ${JSON.stringify(characterData)}`;
                const response = await mockClient.generateContent({
                    contents: [{ parts: [{ text: prompt }] }]
                });

                const enhancement = JSON.parse(response.text);

                // Update outputs
                backstoryOutput.textContent = enhancement.aiBackstory;
                personalityOutput.textContent = enhancement.aiPersonalityInsights;
                voiceOutput.textContent = enhancement.aiCharacterVoice;
                goalsOutput.textContent = enhancement.aiCharacterGoals.join('\n• ');
                flawsOutput.textContent = enhancement.aiCharacterFlaws.join('\n• ');
                questHooksOutput.textContent = enhancement.aiQuestHooks.join('\n• ');

                characterCount++;
                charCount.textContent = characterCount;

            } catch (error) {
                console.error('Error generating character:', error);
                backstoryOutput.textContent = 'Error generating character enhancement.';
            } finally {
                hideLoading();
            }
        }

        // Generate quests
        async function generateQuests() {
            showLoading();

            try {
                const prompt = 'Generate personalized quests for the character';
                const response = await mockClient.generateContent({
                    contents: [{ parts: [{ text: prompt }] }]
                });

                const quests = JSON.parse(response.text);

                let questText = '';
                quests.forEach((quest, index) => {
                    questText += `QUEST ${index + 1}: ${quest.title}\n`;
                    questText += `Difficulty: ${quest.difficulty}\n`;
                    questText += `Description: ${quest.description}\n`;
                    questText += `Objectives:\n`;
                    quest.objectives.forEach(obj => questText += `  • ${obj}\n`);
                    questText += `Rewards:\n`;
                    quest.rewards.forEach(reward => questText += `  • ${reward}\n`);
                    questText += '\n';
                });

                questsOutput.textContent = questText;

            } catch (error) {
                console.error('Error generating quests:', error);
                questsOutput.textContent = 'Error generating quests.';
            } finally {
                hideLoading();
            }
        }

        // Generate story
        async function generateStory() {
            showLoading();

            try {
                const prompt = 'Generate a character story';
                const response = await mockClient.generateContent({
                    contents: [{ parts: [{ text: prompt }] }]
                });

                storyOutput.textContent = response.text;

            } catch (error) {
                console.error('Error generating story:', error);
                storyOutput.textContent = 'Error generating story.';
            } finally {
                hideLoading();
            }
        }

        // Event listeners
        generateCharacterBtn.addEventListener('click', generateCharacter);
        generateQuestsBtn.addEventListener('click', generateQuests);
        generateStoryBtn.addEventListener('click', generateStory);

        // Initialize with default character
        generateCharacter();
    </script>
</body>
</html>
